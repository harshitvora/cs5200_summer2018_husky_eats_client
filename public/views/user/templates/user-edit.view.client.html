<div class="husky-bgimg"></div>
<nav class="navbar navbar-fixed-top bg-light navbar-light">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">HUSKYEATS</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="#"><span class="fa fa-search"></span> Search</a></li>
                <li class="active" ><a href="#!/user"><span class="fa fa-user"></span> {{model.user.firstName}}</a></li>
                <li><a ng-click="model.logout()"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>
<div class="container-fluid">
    <div class="row">
        <div class="col-xs-12 col-md-4 col-md-offset-4 husky-container">
            <div ng-show="model.successMessage" class="alert alert-success">{{model.successMessage}}</div>
            <div ng-show="model.error" class="alert alert-danger">{{model.error}}</div>
            <h2>Edit Profile</h2>
            <form>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="text"
                           readonly
                           name="email"
                           id="email"
                           ng-model="model.user.email"
                           placeholder="email"
                           class="form-control">
                    <label for="firstName">First name:</label>
                    <input type="text"
                           name="firstName"
                           id="firstName"
                           ng-model="model.user.firstName"
                           placeholder="first name"
                           class="form-control">
                    <label for="lastName">Last name:</label>
                    <input type="text"
                           name="lastName"
                           id="lastName"
                           ng-model="model.user.lastName"
                           placeholder="last name"
                           class="form-control">
                    <label for="preferredLocation">Location:</label>
                    <input type="text"
                           name="preferredLocation"
                           id="preferredLocation"
                           ng-model="model.user.preferredLocation"
                           placeholder="City, Country"
                           class="form-control">
                </div>
                <div class="form-group">
                    <label for="pictureUrl">Profile picture URL:</label>
                    <input type="text"
                           name="pictureUrl"
                           id="pictureUrl"
                           ng-model="model.user.pictureUrl"
                           placeholder="url"
                           class="form-control">
                </div>
                <a role="button" ng-click="model.updateUser(model.user)"
                   class="btn pinkBtn btn-block">Update Profile</a>
                <br>

                <h2>Phone Details</h2>
                <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="text"
                           name="phone"
                           id="phone"
                           ng-model="model.phone.phoneNumber"
                           placeholder="Phone Number"
                           class="form-control">
                </div>
                <a role="button" ng-click="model.updatePhone(model.user, model.phone)"
                   class="btn pinkBtn btn-block">Update Phone Details</a>
                <br>

                <h2>Address Details</h2>
                <div class="form-group">
                    <label for="street1">Delivery Address:</label>
                    <input type="text"
                           name="street1"
                           id="street1"
                           ng-model="model.address.street1"
                           placeholder="street address"
                           class="form-control">
                    <input type="text"
                           name="street2"
                           id="street2"
                           ng-model="model.address.street2"
                           placeholder="apt number"
                           class="form-control">
                    <input type="text"
                           name="city"
                           id="city"
                           ng-model="model.address.city"
                           placeholder="city"
                           class="form-control">
                    <input type="text"
                           name="state"
                           id="state"
                           ng-model="model.address.state"
                           placeholder="state"
                           class="form-control">
                    <input type="text"
                           name="zip"
                           id="zip"
                           ng-model="model.address.zip"
                           placeholder="zip code"
                           class="form-control">
                </div>
                <a role="button" ng-click="model.updateAddress(model.user, model.address)"
                   class="btn pinkBtn btn-block">Update Address</a>
                <br>

                <h2>Add card</h2>
                <div ng-show="model.errorMessage" class="alert alert-danger">
                    {{model.errorMessage}}
                </div>
                <div class="form-group">
                    <label for="ccNumber">Credit card number:</label>
                    <input type="text"
                           name="ccNumber"
                           id="ccNumber"
                           ng-model="model.user.ccNumber"
                           placeholder="16 digit number"
                           class="form-control"
                           length="16"
                           #name="ngModel"
                           required>
                    <div *ngIf="ccNumber.invalid"
                         class="alert alert-danger">

                        <div *ngIf="ccNumber.errors.required">
                            CC Number is required.
                        </div>
                        <div *ngIf="ccNumber.errors.length">
                            CC Number must be 16 characters long.
                        </div>
                        <div *ngIf="ccNumber.errors.forbiddenName">
                            CC Number is incorrect.
                        </div>
                    </div>
                    <label for="cvv">CVV:</label>
                    <input type="text"
                           name="cvv"
                           id="cvv"
                           ng-model="model.user.cvv"
                           placeholder="3 digits on the back of card"
                           class="form-control"
                           minlength="3"
                           maxlength="4"
                           #name="ngModel"
                           required>
                    <div *ngIf="cvv.invalid"
                         class="alert alert-danger">

                        <div *ngIf="cvv.errors.required">
                            CVV is required.
                        </div>
                        <div *ngIf="cvv.errors.length">
                            CVV must be 3-4 characters long.
                        </div>
                        <div *ngIf="cvv.errors.forbiddenName">
                            CVV is incorrect.
                        </div>
                    </div>
                    <label for="expiryMM">MM:</label>
                    <input type="text"
                           name="expiryMM"
                           id="expiryMM"
                           ng-model="model.user.expiryMM"
                           placeholder="2 digits of the month"
                           class="form-control"
                           length="2"
                           #name="ngModel"
                           required>
                    <div *ngIf="expiryMM.invalid"
                         class="alert alert-danger">

                        <div *ngIf="expiryMM.errors.required">
                            Expiry MM is required.
                        </div>
                        <div *ngIf="expiryMM.errors.length">
                            Expiry MM must be 2 characters long.
                        </div>
                        <div *ngIf="expiryMM.errors.forbiddenName">
                            Expiry MM is incorrect.
                        </div>
                    </div>
                    <label for="expiryYY">YY:</label>
                    <input type="text"
                           name="expiryYY"
                           id="expiryYY"
                           ng-model="model.user.expiryYY"
                           placeholder="2 digits of the year"
                           class="form-control"
                           length="2"
                           #name="ngModel"
                           required>
                    <div *ngIf="expiryYY.invalid"
                         class="alert alert-danger">

                        <div *ngIf="expiryYY.errors.required">
                            Expiry YY is required.
                        </div>
                        <div *ngIf="expiryYY.errors.length">
                            Expiry YY must be 2 characters long.
                        </div>
                        <div *ngIf="expiryYY.errors.forbiddenName">
                            Expiry YY is incorrect.
                        </div>
                    </div>
                </div>
                <a role="button" ng-click="model.updateCard(model.user)"
                   class="btn pinkBtn btn-block">Add this card</a>
                <br>
                <a role="button" href="#!/user"
                   class="btn btn-default btn-block">Cancel</a>
                <br>
                <a ng-click="model.deleteUser(model.user._id)"
                   class="btn btn-danger btn-block"
                   role="button">Delete account</a>
                <p class="text-danger">Warning! All account information will be lost!</p>
            </form>
        </div>
    </div>
</div>
